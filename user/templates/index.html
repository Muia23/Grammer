{%extends 'base.html' %}
    {% block content%}
    {{block.super}}
    <div class="main">
        <div class="container" style="margin-right: 5px; width: fit-content; border: solid gray 0.03em; padding-top: 3px;">
            <a href="{% url 'profile' current_user.id %}" style="display: inline-block;" ><img src=" {{ profile.prof_pic.url }}" class= "post" alt="Image" style="width: 40px; height: 40px; border-radius: 50%;  display: inline-block;"></a>                                
            <a href="{% url 'profile' current_user.id %}" style="display: inline-block;">{{current_user}}</p></a>                                
        </div>
        <div class="row">
            <div class="col"></div>
            <div class="col-md-11 holder" style="max-height: 82vh; overflow-y: scroll;">                                                                
            {%  for post in posts %}                
                <div class="post">
                    <br>
                    <div class="card" style="padding: 0 15px;">
                        <div class="row">
                            <div class="container-fluid" style="background-color: white; padding-top: 5px;">
                                <a href="{% url 'profilevisit' post.user.id %}" ><img src=" {{ post.user.prof_pic.url }}" class= "post" alt="Image" style="width: 40px; height: 40px; border-radius: 50%;  display: inline-block;"></a>
                                <p style="display: inline-block;width: 10px;"></p>                                    
                                <a href="{% url 'profilevisit' post.user.id %}" ><p style="display: inline-block;">{{post.user.username}}</p></a>
                                <p style="display: inline-block;width: 10px;"></p>                                    
                            </div>
                            <div class="col-md-8" style="background-color: black; width: fit-content; max-height:450px;">                                
                                <img src="{{ post.upload_image.url }}" class= "post" alt="Image" style="height: 100%; width:100%; object-fit: contain;">                                
                            </div>
                            <div class="col-md-4">                                
                                <br>              
                                <p style="font-size: 17px;"> {{post.image_name}} </p>
                                {% autoescape on %}
                                    <p style="text-align: center;">{{ post.caption| safe}}</p>
                                {% endautoescape %}                                
                                <hr>
                                <div class="row">
                                    <div class="col">
                                        <form action="{% url 'like_post' post.pk %}" method="POST" >
                                            {% csrf_token %}
                                            <button type ="submit", name="post_id", value="{{post.id}}",class="btn btn-primary">Like</button>
                                        </form>   
                                    </div>
                                    <div class="col">                                                                             
                                        <p>{{ post.likes.count }} Likes</p>
                                    </div>
                                    <div class="col-sm-5">
                                        <p>{{commenters.post.count}} comments</p>
                                    </div>                                    
                                </div>                                                                
                            
                                <hr>
                                {% for comment in commenters %}
                                    {% ifequal  comment.post post %}
                                        <p style="text-align: center;">Recent comments</p>                                                                                                                    
                                            <div class="row">
                                                <div class="col-sm-1">
                                                    <p><a href="{% url 'profilevisit' post.user.id %}" ><img src=" {{ comment.profile.prof_pic.url }}" class= "post" alt="Image" style="width: 25px; height: 25px; border-radius: 50%;"></a></p>
                                                </div>
                                                <div class="col">
                                                    <p style="font-weight: bold; font-size: 15px; display: inline-block;font-family:Impact, Haettenschweiler, 'Arial Narrow Bold', sans-serif;">{{comment.profile}}</p>                                                
                                                    <p style="font-size: 16px; display:inline-block;">{{comment.comment}}</p>
                                                </div>
                                            </div>                                                                                            
                                    {% else %}                                        
                                    {% endifequal %}
                                {% endfor %}
                                <br>
                                <div class="comment" style="position: absolute; bottom: 1px;">
                                    <input type="text" placeholder="Write comment"><button>Post</button>
                                </div>
                            </div>                            
                        </div>
                    </div>
                </div>
            {% endfor %}
            </div>
            <div class="col"></div>
            <style>
                .holder::-webkit-scrollbar {
                    display: none;
                }

                /* Hide scrollbar for IE, Edge and Firefox */
                .holder {
                  -ms-overflow-style: none;  /* IE and Edge */
                  scrollbar-width: none;  /* Firefox */
                }

            </style>
        </div>
    </div>
    {% endblock%}